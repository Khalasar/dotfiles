function _vim_system_ruby {
  local prog=$1
  shift

  if [ "$rvmrc" != "" ]; then
    (rvm use system && `which $prog` "$@")
  else
    `which $prog` "$@"
  fi
}

function gvim {
  _vim_system_ruby "gvim" "$@"
}

function vim {
  _vim_system_ruby "vim" "$@"
}
